<!-- build time:Sun Apr 03 2022 17:30:10 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next pisces use-motion" lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/main.css?v=7.1.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1"><link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"7.1.1",sidebar:{position:"left",display:"post",offset:5,onmobile:!1,dimmer:!1},back2top:!0,back2top_sidebar:!1,fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta property="og:type" content="website"><meta property="og:title" content="没事多喝水"><meta property="og:url" content="http://konggeyuan.github.io/index.html"><meta property="og:site_name" content="没事多喝水"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="Space Yuan"><meta name="twitter:card" content="summary"><link rel="alternate" href="/atom.xml" title="没事多喝水" type="application/atom+xml"><link rel="canonical" href="http://konggeyuan.github.io/"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>没事多喝水</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-home"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">没事多喝水</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">技术笔记&记录生活点滴</p></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home menu-item-active"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-读书"><a href="/books/" rel="section"><i class="menu-item-icon fa fa-fw fa-book"></i><br>读书</a></li><li class="menu-item menu-item-观影"><a href="/movies/" rel="section"><i class="menu-item-icon fa fa-fw fa-film"></i><br>观影</a></li><li class="menu-item menu-item-笔记"><a href="/categories/%E7%AC%94%E8%AE%B0/" rel="section"><i class="menu-item-icon fa fa-fw fa-book"></i><br>笔记</a></li><li class="menu-item menu-item-读书笔记"><a href="/categories/%E7%AC%94%E8%AE%B0-%E8%AF%BB%E4%B9%A6/" rel="section" class="submenu-item"><i class="menu-item-icon fa fa-fw fa-book"></i><br>读书笔记</a></li><li class="menu-item menu-item-android学习"><a href="/categories/%E7%AC%94%E8%AE%B0-%E5%AE%89%E5%8D%93/" rel="section" class="submenu-item"><i class="menu-item-icon fa fa-fw fa-book"></i><br>Android学习</a></li><li class="menu-item menu-item-生活"><a href="/categories/%E7%94%9F%E6%B4%BB/" rel="section"><i class="menu-item-icon fa fa-fw fa-child"></i><br>生活</a></li><li class="menu-item menu-item-吹口琴"><a href="/categories/%E7%94%9F%E6%B4%BB-%E5%8F%A3%E7%90%B4/" rel="section" class="submenu-item"><i class="menu-item-icon fa fa-fw fa-music"></i><br>吹口琴</a></li><li class="menu-item menu-item-爱咖啡"><a href="/categories/%E7%94%9F%E6%B4%BB-%E5%92%96%E5%95%A1/" rel="section" class="submenu-item"><i class="menu-item-icon fa fa-fw fa-coffee"></i><br>爱咖啡</a></li><li class="menu-item menu-item-it技术-工作文档"><a href="/categories/IT%E6%8A%80%E6%9C%AF/" rel="section"><i class="menu-item-icon fa fa-fw fa-code"></i><br>IT技术-工作文档</a></li><li class="menu-item menu-item-数据库"><a href="/categories/IT%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="section" class="submenu-item"><i class="menu-item-icon fa fa-fw fa-database"></i><br>数据库</a></li><li class="menu-item menu-item-ci/cd运维"><a href="/categories/IT%E6%8A%80%E6%9C%AF-%E8%BF%90%E7%BB%B4/" rel="section" class="submenu-item"><i class="menu-item-icon fa fa-fw fa-server"></i><br>CI/CD运维</a></li><li class="menu-item menu-item-android开发"><a href="/categories/IT%E6%8A%80%E6%9C%AF-%E5%AE%89%E5%8D%93/" rel="section" class="submenu-item"><i class="menu-item-icon fa fa-fw fa-android"></i><br>Android开发</a></li><li class="menu-item menu-item-小程序&微网页"><a href="/categories/IT%E6%8A%80%E6%9C%AF-%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="section" class="submenu-item"><i class="menu-item-icon fa fa-fw fa-wechat"></i><br>小程序&微网页</a></li><li class="menu-item menu-item-web开发"><a href="/categories/IT%E6%8A%80%E6%9C%AF-Web%E5%BC%80%E5%8F%91/" rel="section" class="submenu-item"><i class="menu-item-icon fa fa-fw fa-html5"></i><br>Web开发</a></li><li class="menu-item menu-item-教学"><a href="/categories/%E6%95%99%E5%AD%A6/" rel="section"><i class="menu-item-icon fa fa-fw fa-fas fa-th"></i><br>教学</a></li><li class="menu-item menu-item-安卓"><a href="/categories/%E6%95%99%E5%AD%A6-%E5%AE%89%E5%8D%93/" rel="section" class="submenu-item"><i class="menu-item-icon fa fa-fw fa-android"></i><br>安卓</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><a href="https://github.com/konggeyuan" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><section id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://konggeyuan.github.io/2022/04/03/git%E8%A7%84%E8%8C%83%E4%BE%8B%E5%AD%90/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Space Yuan"><meta itemprop="description" content=""><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/4988185??v=3&s=460"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="没事多喝水"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a href="/2022/04/03/git%E8%A7%84%E8%8C%83%E4%BE%8B%E5%AD%90/" class="post-title-link" itemprop="url">git规范例子</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-04-03 17:24:00 / 修改时间：17:28:17" itemprop="dateCreated datePublished" datetime="2022-04-03T17:24:00+08:00">2022-04-03</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/IT%E6%8A%80%E6%9C%AF-Web%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">IT技术/Web开发</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="git的一个工作流规范"><a href="#git的一个工作流规范" class="headerlink" title="git的一个工作流规范"></a>git的一个工作流规范</h2><h3 id="基本状态示意图"><a href="#基本状态示意图" class="headerlink" title="基本状态示意图"></a>基本状态示意图</h3><p><img src="/images/pasted-107.png" alt="工作流示意图"></p><p>正常的工作流里面，我们会把分支分为 <code>release</code>，<code>develop</code> 和开发人员的提交分支。</p><p><code>release</code> 分支的含义是相对稳定，发布在正式环境上面的代码。这个分支是一个短命分支，里面的更改和优化不会再回溯到 <code>develop</code> 分支中去。<code>bug</code> 的修复会发布一个小版本；而一个功能发布会重新定义 <code>release</code> 分支，以前的就舍弃掉了。</p><p><code>develop</code> 分支的含义是一个相对不稳定，可能再开发的阶段的代码。这里面的代码一般情况下是下一个阶段会发布的代码，通常会跑在内测环境上面。</p><h3 id="提交信息使用中文"><a href="#提交信息使用中文" class="headerlink" title="提交信息使用中文"></a>提交信息使用中文</h3><p>团队成员里面大概不会有不认识中文的同学，全体使用中文的话，能够提高可读性。</p><p>如果本来英文就不好，然后写出了蹩脚的信息，再让另一个英文不好的同学去阅读，这时候基本很难看明白。</p><p>关于使用英文的好处，因为团队里面国外开发人员的情况较少，所以基本不太需要英文来交流；当然，英文还有另外一个好处，那就是在命令行使用的时候，不需要进行输入法切换。</p><h3 id="分支命名规则"><a href="#分支命名规则" class="headerlink" title="分支命名规则"></a>分支命名规则</h3><ul><li><code>feature/xxx-xxx</code> (命名一个功能分支)</li><li><code>issue/xxx-xxx</code> (命名一个 develop 线上的修复)</li><li><code>hotfix/xxx-xxx</code> (命名一个 release 线上的修复)</li><li><code>refactor/xxx-xxx</code> (命名一个优化分支)</li></ul><h3 id="基本开发流程"><a href="#基本开发流程" class="headerlink" title="基本开发流程"></a>基本开发流程</h3><ol><li><p>从 <code>develop</code> 线上切一个功能分支出来。</p></li><li><p>到 gitlab 上面提交 MergeRequest，并且添加 <code>[WIP]</code> 关键字到标题中，标明这处于开发中的状态。</p></li><li><p>持续进行开发，并且经常 <code>rebease</code> 到最新的 <code>develop</code>。</p></li><li><p>找设计师进行面对面的 UI Review，和一些细节调整。</p></li><li><p>审核完毕之后，整理合并成一个符合规范的 Commit。</p></li><li><p>到 gitlab 上面修改分支状态，去掉 <code>[WIP]</code> 关键字，并且通知 Reviewer。如果审核通过，那么就合并到主分支，并且删除远程分支。</p></li></ol><h3 id="Commit-模板"><a href="#Commit-模板" class="headerlink" title="Commit 模板"></a>Commit 模板</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TYPE(功能标题)：功能简述</span><br><span class="line"></span><br><span class="line">这是是描述的第一段信息，用举例说明提交一个合法的提交信息是怎么样的。</span><br><span class="line"></span><br><span class="line">这是是描述的第二段信息，用来说明这次提交的一些东西。</span><br></pre></td></tr></table></figure><h3 id="HOTFIX-修复"><a href="#HOTFIX-修复" class="headerlink" title="HOTFIX 修复"></a>HOTFIX 修复</h3><p>定义一个 <code>hotfix</code> 的修复是需要条件的，不是所有的线上问题都应该进行 <code>hotfix</code>。如果把一个BUG的等级分为一般，重要，和紧急三个等级的话，那么只有紧急状态才会进行 <code>hotfix</code>。而其他状态都应该提交一个 <code>issue</code>，随着下次版本升级而修复。而一旦一个 <code>hotfix</code> 提交，并且合并，那么需要即刻上线或者当天上线。</p><h3 id="HOTFIX-Commit-模板"><a href="#HOTFIX-Commit-模板" class="headerlink" title="HOTFIX Commit 模板"></a>HOTFIX Commit 模板</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">HOTFIX(影响文件)：功能简述</span><br><span class="line"></span><br><span class="line">BUG原因：</span><br><span class="line"></span><br><span class="line">这是是描述这次BUG产生的原因，具体可以到谁哪个Commit造成的。</span><br><span class="line"></span><br><span class="line">修复方式：</span><br><span class="line"></span><br><span class="line">这里是描述这次修复的方式，可能有什么黑科技需要注意的。</span><br></pre></td></tr></table></figure><h3 id="ISSUE-修复"><a href="#ISSUE-修复" class="headerlink" title="ISSUE 修复"></a>ISSUE 修复</h3><p>一个BUG如果不是用 <code>hotfix</code> 那么就应该用 <code>issue</code> 进行修复。</p><p>而一个 <code>issue</code> 修复可能是因为以前的代码造成的，那么括号里面应该写清楚本次修复影响的文件；如果新的功能造成的，那么括号中描述就应该写上与那个功能相关的功能标题。</p><h3 id="ISSUE-Commit-模板"><a href="#ISSUE-Commit-模板" class="headerlink" title="ISSUE Commit 模板"></a>ISSUE Commit 模板</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ISSUE(影响文件&#x2F;功能标题)：功能简述</span><br><span class="line"></span><br><span class="line">BUG原因：</span><br><span class="line"></span><br><span class="line">这是是描述这次BUG产生的原因，具体可以到谁哪个Commit造成的。</span><br><span class="line"></span><br><span class="line">修复方式：</span><br><span class="line"></span><br><span class="line">这里是描述这次修复的方式，可能有什么黑科技需要注意的。</span><br></pre></td></tr></table></figure><h3 id="分支线类型列表"><a href="#分支线类型列表" class="headerlink" title="分支线类型列表"></a>分支线类型列表</h3><p><code>FEATURE</code>： 功能开发</p><p><code>ISSUE</code>： BUG 修复</p><p><code>HOTFIX</code>：紧急 BUG 修复</p><p><code>REFACTOR</code>：优化和重构</p><p><code>DOC</code>: 更改文档</p><p><code>CHORE</code>：其它更改， 比如更新工具</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://konggeyuan.github.io/2022/03/15/nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-root-alias%E7%9A%84%E5%8C%BA%E5%88%AB/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Space Yuan"><meta itemprop="description" content=""><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/4988185??v=3&s=460"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="没事多喝水"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a href="/2022/03/15/nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-root-alias%E7%9A%84%E5%8C%BA%E5%88%AB/" class="post-title-link" itemprop="url">nginx配置文件 root alias的区别</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-15 20:45:00 / 修改时间：20:54:15" itemprop="dateCreated datePublished" datetime="2022-03-15T20:45:00+08:00">2022-03-15</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/IT%E6%8A%80%E6%9C%AF-Web%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">IT技术/Web开发</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>root和alias是系统文件路径的设置<br>root用来设置根目录，alias用来重置当前文件的目录</p><h2 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F;img&#x2F; &#123;</span><br><span class="line">    alias &#x2F;var&#x2F;www&#x2F;image&#x2F;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>访问/img/目录里面的文件时，nginx会自动去/var/www/image/目录找文件</p><h2 id="root"><a href="#root" class="headerlink" title="root"></a>root</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F;img&#x2F; &#123;</span><br><span class="line">    root &#x2F;var&#x2F;www&#x2F;image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>访问/img/目录下的文件时，nginx会去/var/www/image/img/目录下找文件</p><h2 id="关于-document-root"><a href="#关于-document-root" class="headerlink" title="关于$document_root"></a>关于$document_root</h2><p>$document_root 是指当前面{}组中的root选项对应的值变量<br>如果当前{}中没有，就会使用server{}中的root选项</p><h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">location ~ ^&#x2F;test&#x2F;.+\.php$ &#123;</span><br><span class="line">    alias    &#x2F;var&#x2F;www&#x2F;html&#x2F;test&#x2F;;</span><br><span class="line">    </span><br><span class="line">    # 做了一个重写方式，将php后缀名隐藏</span><br><span class="line">    # 比如 &#x2F;test&#x2F;1.php 重写成了 &#x2F;test&#x2F;1</span><br><span class="line">    </span><br><span class="line">    rewrite    &#x2F;test&#x2F;(.*\.php?) &#x2F;$1 break;</span><br><span class="line">    fastcgi_index    index.php;</span><br><span class="line">    fastcgi_pass    127.0.0.1:9000;</span><br><span class="line">    </span><br><span class="line">    # 指定php-fpm读取的文件路径</span><br><span class="line">    fastcgi_param    SCRIPT_FILENAME &#x2F;var&#x2F;www&#x2F;html&#x2F;test$fastcgi_script_name;</span><br><span class="line">    include    fastcgi_params;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location ~ ^&#x2F;test($|&#x2F;.*) &#123;</span><br><span class="line">    alias    &#x2F;var&#x2F;www&#x2F;html&#x2F;test&#x2F;$1;</span><br><span class="line">    index    index.php index.html index.htm;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://konggeyuan.github.io/2022/03/12/drone-ci%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Space Yuan"><meta itemprop="description" content=""><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/4988185??v=3&s=460"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="没事多喝水"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a href="/2022/03/12/drone-ci%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99/" class="post-title-link" itemprop="url">drone_ci脚本编写</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-12 20:33:00 / 修改时间：21:19:22" itemprop="dateCreated datePublished" datetime="2022-03-12T20:33:00+08:00">2022-03-12</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/IT%E6%8A%80%E6%9C%AF-%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">IT技术/运维</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>脚本用yml编写，每个管道用—来区分，单一管道内通过-name来设定不同的步骤，每个管道内的步骤，有when设定满足执行条件.</p><h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># build代码</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">pipeline</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">ssh</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">开发测试更新部署</span></span><br><span class="line"></span><br><span class="line"><span class="attr">clone:</span></span><br><span class="line"><span class="attr">  disable:</span> <span class="literal">true</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># 执行平台</span></span><br><span class="line"><span class="attr">platform:</span></span><br><span class="line"><span class="attr">  os:</span> <span class="string">linux</span></span><br><span class="line"><span class="attr">  arch:</span> <span class="string">arm</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  host:</span> <span class="number">10.12</span><span class="number">.0</span><span class="number">.6</span></span><br><span class="line"><span class="attr">  user:</span> <span class="string">pi</span></span><br><span class="line"><span class="attr">  password:</span></span><br><span class="line"><span class="attr">    from_secret:</span> <span class="string">passwd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新代码</span></span><br><span class="line"><span class="attr">steps:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新仓库</span></span><br><span class="line"><span class="attr">- name:</span> <span class="string">拉取</span></span><br><span class="line"><span class="attr">  environment:</span></span><br><span class="line"><span class="attr">    VARPATH:</span> <span class="string">/var</span></span><br><span class="line"><span class="attr">    REPO_URL:</span> <span class="number">10.12</span><span class="number">.0</span><span class="number">.2</span><span class="string">:3000</span></span><br><span class="line"><span class="attr">    WORKSPACE:</span> <span class="string">/workspace</span></span><br><span class="line"><span class="attr">    PROJ_NAME:</span> <span class="string">aliseochina</span></span><br><span class="line"><span class="attr">    BRANCH:</span> <span class="string">develop</span></span><br><span class="line"><span class="attr">    GITUSR:</span></span><br><span class="line"><span class="attr">      from_secret:</span> <span class="string">git_usr</span></span><br><span class="line"><span class="attr">    GITPASS:</span></span><br><span class="line"><span class="attr">      from_secret:</span> <span class="string">git_pass</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  commands:</span></span><br><span class="line">  <span class="comment"># 初始化部分，第一次clone从仓库中</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">cd</span> <span class="string">$$WORKSPACE/$$PROJ_NAME</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">git</span> <span class="string">pull</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  when:</span></span><br><span class="line"><span class="attr">    branch:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">develop</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 部署代码</span></span><br><span class="line"><span class="attr">- name:</span> <span class="string">部署测试站</span></span><br><span class="line"><span class="attr">  depends_on:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">拉取</span></span><br><span class="line"><span class="attr">  environment:</span></span><br><span class="line"><span class="attr">    VARPATH:</span> <span class="string">/var</span></span><br><span class="line"><span class="attr">    WORKSPACE:</span> <span class="string">/workspace</span></span><br><span class="line"><span class="attr">    PROJ_NAME:</span> <span class="string">aliseochina</span></span><br><span class="line"><span class="attr">    REMOTE_USER:</span> <span class="string">ubuntu</span></span><br><span class="line"><span class="attr">    REMOTE_HOST:</span> <span class="number">165.154</span><span class="number">.20</span><span class="number">.145</span></span><br><span class="line"><span class="attr">    TARGET:</span> <span class="string">/tmp/aliseo</span></span><br><span class="line"><span class="attr">    EXCLUDE_FROM_FILE:</span> <span class="string">'exclude-file.txt'</span></span><br><span class="line"><span class="attr">  commands:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">cd</span> <span class="string">$$WORKSPACE/$$PROJ_NAME</span></span><br><span class="line">  <span class="comment"># 同步代码</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">rsync</span> <span class="bullet">-ave</span> <span class="bullet">-t</span> <span class="bullet">-r</span> <span class="bullet">-z</span> <span class="bullet">--rsh=ssh</span> <span class="bullet">--stats</span> <span class="string">*</span> <span class="bullet">--exclude-from=$$EXCLUDE_FROM_FILE</span> <span class="string">$$REMOTE_USER@$$REMOTE_HOST:$$TARGET</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  when:</span></span><br><span class="line"><span class="attr">    branch:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">develop</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 触发条件</span></span><br><span class="line"><span class="attr">trigger:</span></span><br><span class="line"><span class="attr">  branch:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">develop</span></span><br><span class="line"><span class="attr">  event:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">pull_request</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">push</span></span><br></pre></td></tr></table></figure><h3 id="secret秘钥的添加"><a href="#secret秘钥的添加" class="headerlink" title="secret秘钥的添加"></a>secret秘钥的添加</h3><ul><li><p>通过网站添加</p></li><li><p>通过命令添加</p><ul><li>安装drone命令<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   wget https:&#x2F;&#x2F;github.com&#x2F;harness&#x2F;drone-cli&#x2F;releases&#x2F;download&#x2F;v1.5.0&#x2F;drone_linux_arm.tar.gz</span><br><span class="line">   tar zxvf drone_linux_arm.tar.gz</span><br><span class="line">   cp drone &#x2F;usr&#x2F;local&#x2F;bin</span><br><span class="line">   </span><br><span class="line">   # 编辑bashrc添加</span><br><span class="line">   export DRONE_SERVER&#x3D;http:&#x2F;&#x2F;ip:9090</span><br><span class="line">export DRONE_TOKEN&#x3D;秘钥</span><br></pre></td></tr></table></figure></li><li>针对某个仓库添加秘钥<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">drone secret add \</span><br><span class="line">--repository 仓库名称 \</span><br><span class="line">--name rsync_key \</span><br><span class="line">--data @.&#x2F;id_rsa</span><br></pre></td></tr></table></figure></li></ul></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://konggeyuan.github.io/2022/03/12/%E6%A0%91%E8%8E%93%E6%B4%BE3-docker-build-alpine%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Space Yuan"><meta itemprop="description" content=""><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/4988185??v=3&s=460"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="没事多喝水"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a href="/2022/03/12/%E6%A0%91%E8%8E%93%E6%B4%BE3-docker-build-alpine%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/" class="post-title-link" itemprop="url">树莓派3 docker build alpine问题汇总</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-12 12:34:40 / 修改时间：12:40:25" itemprop="dateCreated datePublished" datetime="2022-03-12T12:34:40+08:00">2022-03-12</time></span></div></header><div class="post-body" itemprop="articleBody"><p>以下引用自：<a href="https://blog.51cto.com/laok8/2618697，提供的方法" target="_blank" rel="noopener">https://blog.51cto.com/laok8/2618697，提供的方法</a></p><blockquote><p>fatal: unable to access error:0D0D90AD:asn1 encoding routines:ASN1_TIME_adj:error getting time</p></blockquote><blockquote><p>在树莓派3B+（cpu 是 armv7 架构） 上面跑的 Docker。</p><p>问题是镜像 alpine 3.13 版本引起的（3.12 没问题）.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;docker container run --rm -it alpine:3.13 sh</span><br><span class="line">&gt;/ <span class="comment"># ping 8.8.8.8</span></span><br><span class="line">&gt;PING 8.8.8.8 (8.8.8.8): 56 data bytes</span><br><span class="line">&gt;ping: clock_gettime(MONOTONIC) failed</span><br><span class="line">&gt;/ <span class="comment"># nslookup www.baidu.com</span></span><br><span class="line">&gt;nslookup: clock_gettime(MONOTONIC) failed</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;docker container run --rm -it --privileged alpine:3.13 sh</span><br><span class="line">&gt;/ <span class="comment"># nslookup www.baidu.com</span></span><br><span class="line">&gt;Server:		8.8.8.8</span><br><span class="line">&gt;Address:	8.8.8.8:53</span><br><span class="line"></span><br><span class="line">&gt;Non-authoritative answer:</span><br><span class="line">&gt;Name:	www.baidu.com</span><br><span class="line">&gt;Address: 220.181.38.148</span><br><span class="line"></span><br><span class="line">&gt;Non-authoritative answer:</span><br><span class="line">&gt;Name:	www.baidu.com</span><br><span class="line">&gt;Address: 2a00:1450:4005:80b::2003</span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><blockquote><p>最根本的原因是 Docker 自 1.10 版本开始加入的安全特性( –security-opt seccomp=/path/to/seccomp/profile.json),这里还不确定是 alpine 镜像里的哪个 系统调用 被阻拦了（怀疑是 clock_settime ）</p></blockquote><blockquote><p>Secure computing mode (seccomp) is a Linux kernel feature. You can use it to restrict the actions available within the container. The seccomp() system call operates on the seccomp state of the calling process. You can use this feature to restrict your application’s access.<br>This feature is available only if Docker has been built with seccomp and the kernel is configured with CONFIG_SECCOMP enabled. To check if your kernel supports seccomp:</p></blockquote><p>提供的解决方案：</p><ul><li>改动 Dockerfile 里的版本，指定拉取 alpine:3.12 版本，然后再 build 一个镜像、容器.</li><li>直接关闭 seccomp 配置</li><li>确定是哪个系统调用函数引起的，然后使用 docker run –cap-add=SYS_PTRACE 明确添加</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm --security-opt seccomp=unconfined alpine:3.13 ping www.google.de</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://konggeyuan.github.io/2022/03/11/RPC-failed-HTTP-413-curl-22-The-requested-URL-returned-error-413-Request-Entity-Too-Large%E9%97%AE%E9%A2%98/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Space Yuan"><meta itemprop="description" content=""><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/4988185??v=3&s=460"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="没事多喝水"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a href="/2022/03/11/RPC-failed-HTTP-413-curl-22-The-requested-URL-returned-error-413-Request-Entity-Too-Large%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">RPC failed; HTTP 413 curl 22 The requested URL returned error: 413 Request Entity Too Large问题</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-11 21:10:00 / 修改时间：21:13:26" itemprop="dateCreated datePublished" datetime="2022-03-11T21:10:00+08:00">2022-03-11</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/IT%E6%8A%80%E6%9C%AF-Web%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">IT技术/Web开发/</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>向远程仓库推送时：RPC failed; HTTP 413 curl 22 The requested URL returned error: 413 Request Entity Too Large错误！</p><p>解决办法是：</p><p>在git bash中执行：git config http.postBuffer 524288000</p><p>成功后，再次提交</p><p>postBuffer改为最大50M</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://konggeyuan.github.io/2022/02/28/4%E7%A7%8D%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Space Yuan"><meta itemprop="description" content=""><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/4988185??v=3&s=460"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="没事多喝水"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a href="/2022/02/28/4%E7%A7%8D%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/" class="post-title-link" itemprop="url">4种基本布局</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-02-28 17:17:00 / 修改时间：18:02:29" itemprop="dateCreated datePublished" datetime="2022-02-28T17:17:00+08:00">2022-02-28</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%AC%94%E8%AE%B0-%E5%AE%89%E5%8D%93/" itemprop="url" rel="index"><span itemprop="name">笔记/安卓/</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><style>.redSel{font-weight:700;color:#fff;background-color:red}.red-font{font-weight:700;color:red}.blue-font{font-weight:700;color:#06C}.yellowSel{font-weight:700;color:#000;background-color:gold}</style><h1 id="布局与控件的关系"><a href="#布局与控件的关系" class="headerlink" title="布局与控件的关系"></a>布局与控件的关系</h1><p><img src="/images/pasted-106.png" alt="upload successful"></p><h2 id="线性布局"><a href="#线性布局" class="headerlink" title="线性布局"></a>线性布局</h2><p>LinearLayout <span class="blue-font">作线性布局</span></p><p>此布局会将它所包含的控件在线性方向上依次排列</p><p>线性排列，向2个方向排列。</p><p>android:orientation <span class="blue-font">属性指定了排列方向</span></p><p>vertical纵向排列</p><p>horizontal水平方向上排列</p><h3 id="界面XML"><a href="#界面XML" class="headerlink" title="界面XML"></a>界面XML</h3><p><strong>在LinearLayout中添加了3个Button，每个Button的长和宽都是wrap_content ，并指定了排列方向是vertical</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:orientation&#x3D;&quot;vertical&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button1&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 1&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button2&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 2&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button3&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 3&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;LinearLayout&gt;</span><br></pre></td></tr></table></figure><p><strong>修改一下LinearLayout的排列方向，改为水平排列</strong></p><p>注意</p><p><span class="redSel">LinearLayout的排列方向是horizontal，内部的控件就绝对不能将宽度指定为match_parent 。因为单独一个控件就会将整个水平方向占满，而其他控件就没有可放置的位置了。同理，如果LinearLayout的排列方向是vertical，内部的控件就不能将高度指定为match_parent<br></span></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:orientation&#x3D;&quot;horizontal&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button1&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_gravity&#x3D;&quot;top&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 1&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button2&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_gravity&#x3D;&quot;center_vertical&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 2&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button3&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_gravity&#x3D;&quot;bottom&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 3&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;LinearLayout&gt;</span><br></pre></td></tr></table></figure><p><strong>指定垂直方向上的排列方向，将第一个Button的对齐方式指定为top，第二个Button的对齐方式指定为center_vertical，第三个Button的对齐方式指定为bottom</strong></p><h3 id="android-layout-weight"><a href="#android-layout-weight" class="headerlink" title="android:layout_weight"></a>android:layout_weight</h3><p>允许使用比例的方式来指定控件的大小</p><h4 id="界面XML-1"><a href="#界面XML-1" class="headerlink" title="界面XML"></a>界面XML</h4><p>编写一个消息发送界面，需要一个文本编辑框和一个发送按钮</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:orientation&#x3D;&quot;horizontal&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;input_message&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_weight&#x3D;&quot;1&quot;</span><br><span class="line">        android:hint&#x3D;&quot;Type something&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;send&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">                android:layout_weight&#x3D;&quot;1&quot;</span><br><span class="line">        android:text&#x3D;&quot;Send&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;LinearLayout&gt;</span><br></pre></td></tr></table></figure><p>注意</p><p><span class="redSel">将EditText和Button的宽度都指定成了0dp，由于使用了android:layout_weight 属性，此时控件的宽度就不应该再由android:layout_width 来决定</span></p><p>在EditText和Button里都将android:layout_weight 属性的值指定为1，这表示EditText和Button将在水平方向平分宽度</p><blockquote><p>为什么将android:layout_weight 属性的值同时指定为1就会平分屏幕宽度？</p><blockquote><p>系统会先把LinearLayout下所有控件指定的layout_weight 值相加，得到一个总值，然后每个控件所占大小的比例就是用该控件的layout_weight 值除以刚才算出的总值。</p></blockquote></blockquote><p>另一个效果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:orientation&#x3D;&quot;horizontal&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;input_message&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_weight&#x3D;&quot;1&quot;</span><br><span class="line">        android:hint&#x3D;&quot;Type something&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;send&quot;    </span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:text&#x3D;&quot;Send&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;LinearLayout&gt;</span><br></pre></td></tr></table></figure><blockquote><p>指定了EditText的android:layout_weight 属性，并将Button的宽度改回wrap_content 。这表示Button的宽度仍然按照wrap_content 来计算，而EditText则会占满屏幕所有的剩余空间</p></blockquote><h2 id="相对布局"><a href="#相对布局" class="headerlink" title="相对布局"></a>相对布局</h2><p>通过相对定位的方式让控件出现在布局的任何位置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;RelativeLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button1&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_alignParentLeft&#x3D;&quot;true&quot;</span><br><span class="line">        android:layout_alignParentTop&#x3D;&quot;true&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 1&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button2&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_alignParentRight&#x3D;&quot;true&quot;</span><br><span class="line">        android:layout_alignParentTop&#x3D;&quot;true&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 2&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button3&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_centerInParent&#x3D;&quot;true&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 3&quot; &#x2F;&gt;</span><br><span class="line">	&lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button4&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_alignParentBottom&#x3D;&quot;true&quot;</span><br><span class="line">        android:layout_alignParentLeft&#x3D;&quot;true&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 4&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button5&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_alignParentBottom&#x3D;&quot;true&quot;</span><br><span class="line">        android:layout_alignParentRight&#x3D;&quot;true&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 5&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;RelativeLayout&gt;</span><br></pre></td></tr></table></figure><blockquote><p>Button 1和父布局的左上角对齐，Button 2和父布局的右上角对齐，Button 3居中显示，Button 4和父布局的左下角对齐，Button 5和父布局的右下角对齐</p></blockquote><h2 id="帧布局"><a href="#帧布局" class="headerlink" title="帧布局"></a>帧布局</h2><p>FrameLayout又称作帧布局，所有的控件都会默认摆放在布局的左上角</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;FrameLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;text_view&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:text&#x3D;&quot;This is TextView&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;ImageView</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;image_view&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:src&#x3D;&quot;@mipmap&#x2F;ic_launcher&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;FrameLayout&gt;</span><br></pre></td></tr></table></figure><p>FrameLayout中只是放置了一个TextView和一个ImageView。这里ImageView直接使用了@mipmap 来访问ic_launcher这张图</p><blockquote><p>可以看到，文字和图片都是位于布局的左上角。由于ImageView是在TextView之后添加的，因此图片压在了文字的上面</p></blockquote><p>还可以使用layout_gravity 属性来指定控件在布局中的对齐方式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;FrameLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;text_view&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_gravity&#x3D;&quot;left&quot;</span><br><span class="line">        android:text&#x3D;&quot;This is TextView&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;ImageView</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_gravity&#x3D;&quot;right&quot;</span><br><span class="line">        android:src&#x3D;&quot;@mipmap&#x2F;ic_launcher&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;FrameLayout&gt;</span><br></pre></td></tr></table></figure><h2 id="百分比布局"><a href="#百分比布局" class="headerlink" title="百分比布局"></a>百分比布局</h2><p>app/build.gradle文件，在dependencies 闭包中添加如下内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])</span><br><span class="line">    compile &#39;com.android.support:appcompat-v7:24.2.1&#39;</span><br><span class="line">    compile &#39;com.android.support:percent:24.2.1&#39;</span><br><span class="line">    testCompile &#39;junit:junit:4.12&#39;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;android.support.percent.PercentFrameLayout</span><br><span class="line">    xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    xmlns:app&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res-auto&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button1&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 1&quot;</span><br><span class="line">        android:layout_gravity&#x3D;&quot;left|top&quot;</span><br><span class="line">        app:layout_widthPercent&#x3D;&quot;50%&quot;</span><br><span class="line">        app:layout_heightPercent&#x3D;&quot;50%&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button2&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 2&quot;</span><br><span class="line">        android:layout_gravity&#x3D;&quot;right|top&quot;</span><br><span class="line">        app:layout_widthPercent&#x3D;&quot;50%&quot;</span><br><span class="line">        app:layout_heightPercent&#x3D;&quot;50%&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button3&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 3&quot;</span><br><span class="line">        android:layout_gravity&#x3D;&quot;left|bottom&quot;</span><br><span class="line">        app:layout_widthPercent&#x3D;&quot;50%&quot;</span><br><span class="line">        app:layout_heightPercent&#x3D;&quot;50%&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button4&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button 4&quot;</span><br><span class="line">        android:layout_gravity&#x3D;&quot;right|bottom&quot;</span><br><span class="line">        app:layout_widthPercent&#x3D;&quot;50%&quot;</span><br><span class="line">        app:layout_heightPercent&#x3D;&quot;50%&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;android.support.percent.PercentFrameLayout&gt;</span><br></pre></td></tr></table></figure><blockquote><p>最外层使用了PercentFrameLayout，由于百分比布局并不是内置在系统SDK当中的，所以需要把完整的包路径写出来。然后还必须定义一个app的命名空间，这样才能使用百分比布局的自定义属性。</p></blockquote><blockquote><p>在PercentFrameLayout中我们定义了4个按钮，使用app:layout_widthPercent 属性将各按钮的宽度指定为布局的50%，使用app:layout_heightPercent 属性将各按钮的高度指定为布局的50%。这里之所以能使用app前缀的属性就是因为刚才定义了app的命名空间，当然我们一直能使用android前缀的属性也是同样的道理。</p></blockquote><blockquote><p>PercentFrameLayout还是会继承FrameLayout的特性，即所有的控件默认都是摆放在布局的左上角。那么为了让这4个按钮不会重叠，这里还是借助了layout_gravity 来分别将这4个按钮放置在布局的左上、右上、左下、右下4个位置。</p></blockquote></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://konggeyuan.github.io/2022/02/28/%E5%B8%B8%E7%94%A8UI%E6%8E%A7%E4%BB%B6/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Space Yuan"><meta itemprop="description" content=""><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/4988185??v=3&s=460"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="没事多喝水"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a href="/2022/02/28/%E5%B8%B8%E7%94%A8UI%E6%8E%A7%E4%BB%B6/" class="post-title-link" itemprop="url">常用UI控件</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-02-28 16:06:00 / 修改时间：17:12:48" itemprop="dateCreated datePublished" datetime="2022-02-28T16:06:00+08:00">2022-02-28</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%AC%94%E8%AE%B0-%E5%AE%89%E5%8D%93/" itemprop="url" rel="index"><span itemprop="name">笔记/安卓/</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><style>.redSel{font-weight:700;color:#fff;background-color:red}.yellowSel{font-weight:700;color:#000;background-color:gold}.blue-font{font-weight:700;color:#06C}</style><h3 id="空间公用属性"><a href="#空间公用属性" class="headerlink" title="空间公用属性"></a>空间公用属性</h3><p>android:id 给当前控件定义了一个唯一标识符</p><p>android:layout_width、android:layout_height 指定了控件的宽度和高度</p><h4 id="宽度和高度可选属性"><a href="#宽度和高度可选属性" class="headerlink" title="宽度和高度可选属性"></a>宽度和高度可选属性</h4><p>MATCH_PARENT 、FILL_PARENT 、 WRAP_CONTENT</p><p>FILL_PARENT在Android2.2后，名称改为: FILL_PARENT改名为MATCH_PARENT</p><p>MATCH_PARENT <span class="redSel">表示让当前控件的大小和父布局的大小一样，也就是由父布局来决定当前控件的大小</span></p><p>WRAP_CONTENT <span class="redSel">表示让当前控件的大小能够刚好包含住里面的内容，也就是由控件内容决定当前控件的大小</span></p><h4 id="对齐方式"><a href="#对齐方式" class="headerlink" title="对齐方式"></a>对齐方式</h4><p>android:gravity 指定文字的对齐方式</p><p>可选值有 <span class="yellowSel">top 、bottom 、left 、right 、center</span></p><p>center <span class="redSel">表示在垂直和水平方向都居中对齐</span></p><h4 id="文字大小"><a href="#文字大小" class="headerlink" title="文字大小"></a>文字大小</h4><p>android:textSize 属性指定文字的大小</p><p>android:textColor 属性指定文字的颜色</p><h4 id="分辨率"><a href="#分辨率" class="headerlink" title="分辨率"></a>分辨率</h4><p>低（120dpi）、中（160dpi）、高（240dpi）、超高（320dpi）</p><h4 id="屏幕尺寸、分辨率、像素密度三者关系"><a href="#屏幕尺寸、分辨率、像素密度三者关系" class="headerlink" title="屏幕尺寸、分辨率、像素密度三者关系"></a>屏幕尺寸、分辨率、像素密度三者关系</h4><p><img src="/images/pasted-104.png" alt="upload successful"></p><p><img src="/images/pasted-105.png" alt="upload successful"></p><h4 id="大小单位"><a href="#大小单位" class="headerlink" title="大小单位"></a>大小单位</h4><p>PX: 像素单位，常用尺寸单位，常用于图片设计、网页设计等<br>DP: 单位英寸的像素点数量</p><p><strong>DP</strong>到<strong>PX</strong>的转换系数分别是0.75、1、1.5、2，这个系数乘dp长度就是像素数。假如我的手机像素密度是240dpi，现在屏幕上有一个长度为80dp 的图片，那么显示的像素长度为80x1.5=120px。</p><blockquote><p>推荐使用12sp、14sp、18sp、22sp作为字体设置的大小，不推荐使用奇数和小数，容易造成精度的丢失问题；小于12sp的字体会太小导致用户看不清</p></blockquote><h3 id="TextView"><a href="#TextView" class="headerlink" title="TextView"></a>TextView</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:orientation&#x3D;&quot;vertical&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;text_view&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:gravity&#x3D;&quot;center&quot;</span><br><span class="line">        android:textSize&#x3D;&quot;24sp&quot;</span><br><span class="line">        android:textColor&#x3D;&quot;#00ff00&quot;</span><br><span class="line">        android:text&#x3D;&quot;This is TextView&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;LinearLayout&gt;</span><br></pre></td></tr></table></figure><h3 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h3><h4 id="界面XML"><a href="#界面XML" class="headerlink" title="界面XML"></a>界面XML</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:orientation&#x3D;&quot;vertical&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:text&#x3D;&quot;Button&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;LinearLayout&gt;</span><br></pre></td></tr></table></figure><p>android:textAllCaps <span class="blue-font">所有英文字母大写</span></p><h4 id="执行代码"><a href="#执行代码" class="headerlink" title="执行代码"></a>执行代码</h4><h5 id="匿名监听方式"><a href="#匿名监听方式" class="headerlink" title="匿名监听方式"></a>匿名监听方式</h5><p>在MainActivity中为Button的点击事件注册一个监听器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends AppCompatActivity &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        Button button &#x3D; (Button) findViewById(R.id.button);</span><br><span class="line">        </span><br><span class="line">        &#x2F;&#x2F; 基于id为button的按钮的点击事件</span><br><span class="line">        button.setOnClickListener(new View.OnClickListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onClick(View v) &#123;</span><br><span class="line">                &#x2F;&#x2F; 在此处添加逻辑</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="接口方式"><a href="#接口方式" class="headerlink" title="接口方式"></a>接口方式</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends AppCompatActivity implements View.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        Button button &#x3D; (Button) findViewById(R.id.button);</span><br><span class="line">        button.setOnClickListener(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; 在点击事件中寻找id为button的按钮</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">        switch (v.getId()) &#123;</span><br><span class="line">            case R.id.button:</span><br><span class="line">                &#x2F;&#x2F; 在此处添加逻辑</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="EditText"><a href="#EditText" class="headerlink" title="EditText"></a>EditText</h3><p>允许用户在控件里输入和编辑内容，并可以在程序中对这些内容进行处理</p><h4 id="界面XML-1"><a href="#界面XML-1" class="headerlink" title="界面XML"></a>界面XML</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:orientation&#x3D;&quot;vertical&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;edit_text&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;LinearLayout&gt;</span><br></pre></td></tr></table></figure><p>android:hint <span class="blue-font">指定了一段提示性的文本</span></p><p>android:maxLines <span class="blue-font">指定文本框的最大显示几行</span></p><h4 id="执行代码-1"><a href="#执行代码-1" class="headerlink" title="执行代码"></a>执行代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends AppCompatActivity implements View.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    private EditText editText;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        Button button &#x3D; (Button) findViewById(R.id.button);</span><br><span class="line">        </span><br><span class="line">        &#x2F;&#x2F; 获取文本框</span><br><span class="line">        editText &#x3D; (EditText) findViewById(R.id.edit_text);</span><br><span class="line">        </span><br><span class="line">        &#x2F;&#x2F; 按钮绑定公共事件</span><br><span class="line">        button.setOnClickListener(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">        switch (v.getId()) &#123;</span><br><span class="line">            case R.id.button:</span><br><span class="line">            </span><br><span class="line">            	&#x2F;&#x2F;读取文本框内容</span><br><span class="line">                String inputText &#x3D; editText.getText().toString();</span><br><span class="line">                </span><br><span class="line">                &#x2F;&#x2F;显示文本框内容</span><br><span class="line">                Toast.makeText(MainActivity.this, inputText, </span><br><span class="line">                Toast.LENGTH_SHORT).show();</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ImageView"><a href="#ImageView" class="headerlink" title="ImageView"></a>ImageView</h3><p>这个控件需要提前准备好一些图片，图片通常都是放在以“drawable”开头的目录下的，在res目录下新建一个drawable-xhdpi目录，将图片放入该目录</p><h4 id="界面XML-2"><a href="#界面XML-2" class="headerlink" title="界面XML"></a>界面XML</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:orientation&#x3D;&quot;vertical&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    &lt;ImageView</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;image_view&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:src&#x3D;&quot;@drawable&#x2F;img_1 &quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;LinearLayout&gt;</span><br></pre></td></tr></table></figure><h4 id="执行代码-2"><a href="#执行代码-2" class="headerlink" title="执行代码"></a>执行代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends AppCompatActivity implements View.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    private EditText editText;</span><br><span class="line"></span><br><span class="line">    private ImageView imageView;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        Button button &#x3D; (Button) findViewById(R.id.button);</span><br><span class="line">        editText &#x3D; (EditText) findViewById(R.id.edit_text);</span><br><span class="line">        imageView  &#x3D; (ImageView) findViewById(R.id.image_view);</span><br><span class="line">        button.setOnClickListener(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; 通过调用ImageView的setImageResource() 方法将显示的图片改成img_2</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">        switch (v.getId()) &#123;</span><br><span class="line">            case R.id.button:</span><br><span class="line">             </span><br><span class="line">			&#x2F;&#x2F; 读取图片             imageView.setImageResource(R.drawable.img_2);</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ProgressBar"><a href="#ProgressBar" class="headerlink" title="ProgressBar"></a>ProgressBar</h3><p>用于在界面上显示一个进度条</p><h4 id="界面XML-3"><a href="#界面XML-3" class="headerlink" title="界面XML"></a>界面XML</h4><p>android:visibility <span class="blue-font">控件的可见属性</span></p><p>可选值有3种：<span class="yellowSel">visible 、invisible 、gone</span></p><p>visible <span class="redSel">表示控件是可见的，这个值是默认值</span></p><p>invisible <span class="redSel">表示控件不可见，但是它仍然占据着原来的位置和大小，可以理解成控件变成透明状态</span></p><p>gone <span class="redSel">则表示控件不仅不可见，而且不再占用任何屏幕空间。</span></p><p>android:max <span class="blue-font">进度条设置一个最大值</span></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:orientation&#x3D;&quot;vertical&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    &lt;ProgressBar</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;progress_bar&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;LinearLayout&gt;</span><br></pre></td></tr></table></figure><h4 id="执行代码-3"><a href="#执行代码-3" class="headerlink" title="执行代码"></a>执行代码</h4><p>实现效果</p><p>点击一下按钮让进度条消失，再点击一下按钮让进度条出现</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends AppCompatActivity implements View.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    private EditText editText;</span><br><span class="line"></span><br><span class="line">    private ImageView imageView;</span><br><span class="line"></span><br><span class="line">    private ProgressBar progressBar;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        Button button &#x3D; (Button) findViewById(R.id.button);</span><br><span class="line">        editText &#x3D; (EditText) findViewById(R.id.edit_text);</span><br><span class="line">        imageView  &#x3D; (ImageView) findViewById(R.id.image_view);</span><br><span class="line">        progressBar &#x3D; (ProgressBar) findViewById(R.id.progress_bar);</span><br><span class="line">        button.setOnClickListener(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">        switch (v.getId()) &#123;</span><br><span class="line">        	&#x2F;&#x2F; 根据判断进度条状态设定可见与不可见</span><br><span class="line">            case R.id.button:</span><br><span class="line">                if (progressBar.getVisibility() &#x3D;&#x3D; View.GONE) &#123;</span><br><span class="line">                    progressBar.setVisibility(View.VISIBLE);</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    progressBar.setVisibility(View.GONE);</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>动态地更改进度条的进度</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> public class MainActivity extends AppCompatActivity implements View.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">        switch (v.getId()) &#123;</span><br><span class="line">            case R.id.button:</span><br><span class="line">                int progress &#x3D; progressBar.getProgress();</span><br><span class="line">                progress &#x3D; progress + 10;</span><br><span class="line">                progressBar.setProgress(progress);</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="AlertDialog"><a href="#AlertDialog" class="headerlink" title="AlertDialog"></a>AlertDialog</h3><p>当前的界面弹出一个对话框，<span class="redSel">对话框是置顶于所有界面元素之上的，能够屏蔽掉其他控件的交互能力</span>一般都是用于提示一些非常重要的内容或者警告信息</p><h4 id="执行代码-4"><a href="#执行代码-4" class="headerlink" title="执行代码"></a>执行代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends AppCompatActivity implements View.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">        switch (v.getId()) &#123;</span><br><span class="line">            case R.id.button:</span><br><span class="line">            	&#x2F;&#x2F; 创建一下对话框对象</span><br><span class="line">                AlertDialog.Builder dialog &#x3D; new AlertDialog.Builder (MainActivity.</span><br><span class="line">                    this);</span><br><span class="line">                &#x2F;&#x2F; 设置标题和按钮</span><br><span class="line">                dialog.setTitle(&quot;This is Dialog&quot;);</span><br><span class="line">                dialog.setMessage(&quot;Something important.&quot;);</span><br><span class="line">                dialog.setCancelable(false);</span><br><span class="line">                </span><br><span class="line">                &#x2F;&#x2F; 设置确认按钮 监听点击事件</span><br><span class="line">                dialog.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() &#123;</span><br><span class="line">                    @Override</span><br><span class="line">                    public void onClick(DialogInterface dialog, int which) &#123;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                </span><br><span class="line">                &#x2F;&#x2F; 设置取消按钮 监听事件</span><br><span class="line">                dialog.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() &#123;</span><br><span class="line">                    @Override</span><br><span class="line">                    public void onClick(DialogInterface dialog, int which) &#123;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                </span><br><span class="line">                &#x2F;&#x2F; 显示对话框</span><br><span class="line">                dialog.show();</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ProgressDialog"><a href="#ProgressDialog" class="headerlink" title="ProgressDialog"></a>ProgressDialog</h3><p>在对话框中显示一个进度条，一般用于表示当前操作比较耗时，让用户耐心地等待。</p><h4 id="执行代码-5"><a href="#执行代码-5" class="headerlink" title="执行代码"></a>执行代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends AppCompatActivity implements View.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">        switch (v.getId()) &#123;</span><br><span class="line">            case R.id.button:</span><br><span class="line">                ProgressDialog progressDialog &#x3D; new ProgressDialog</span><br><span class="line">                    (MainActivity.this);</span><br><span class="line">                progressDialog.setTitle(&quot;This is ProgressDialog&quot;);</span><br><span class="line">                progressDialog.setMessage(&quot;Loading...&quot;);</span><br><span class="line">                progressDialog.setCancelable(true);</span><br><span class="line">                progressDialog.show();</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://konggeyuan.github.io/2022/02/26/Activity-%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Space Yuan"><meta itemprop="description" content=""><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/4988185??v=3&s=460"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="没事多喝水"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a href="/2022/02/26/Activity-%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">Activity 启动模式</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-02-26 22:22:00 / 修改时间：22:53:23" itemprop="dateCreated datePublished" datetime="2022-02-26T22:22:00+08:00">2022-02-26</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%AC%94%E8%AE%B0-%E5%AE%89%E5%8D%93/" itemprop="url" rel="index"><span itemprop="name">笔记/安卓/</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><style>.redSel{font-weight:700;color:#fff;background-color:red}.yellowSel{font-weight:700;color:#000;background-color:gold}</style><h2 id="4种启动模式"><a href="#4种启动模式" class="headerlink" title="4种启动模式"></a>4种启动模式</h2><h3 id="设置方法"><a href="#设置方法" class="headerlink" title="设置方法"></a>设置方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在AndroidManifest.xml中通过给&lt;activity&gt; 标签指定</span><br></pre></td></tr></table></figure><h3 id="standard-模式"><a href="#standard-模式" class="headerlink" title="standard 模式"></a>standard 模式</h3><p>每当启动一个新的活动，它就会在返回栈中入栈，并处于栈顶的位置。</p><p>standard模式的原理示意图</p><p><img src="/images/pasted-100.png" alt="upload successful"></p><h3 id="singleTop-模式"><a href="#singleTop-模式" class="headerlink" title="singleTop 模式"></a>singleTop 模式</h3><p>在启动活动时如果发现返回栈的<span class="redSel">栈顶</span>已经是该活动，则认为可以直接使用它，不会再创建新的活动实例</p><p><span class="yellowSel">当所设定的活动并未处于栈顶位置时，这时再启动此活动，还是会创建新的实例的</span></p><p><img src="/images/pasted-101.png" alt="upload successful"></p><h3 id="singleTask-模式"><a href="#singleTask-模式" class="headerlink" title="singleTask 模式"></a>singleTask 模式</h3><p>启动该活动时系统首先会在返回栈中检查是否存在该活动的实例，如果发现已经存在则直接使用该实例，<span class="redSel">并把在这个活动之上的所有活动统统出栈</span>，如果没有发现就会创建一个新的活动实例</p><p><img src="/images/pasted-102.png" alt="upload successful"></p><h3 id="singleInstance-模式"><a href="#singleInstance-模式" class="headerlink" title="singleInstance 模式"></a>singleInstance 模式</h3><p>指定为singleInstance模式的活动会<span class="redSel">启用一个新的返回栈</span>来管理这个活动</p><p><img src="/images/pasted-103.png" alt="upload successful"></p><p><span class="yellowSel">有什么意义呢</span></p><p>想象以下场景，假设我们的程序中<span class="redSel">有一个活动允许其他程序调用</span>，想实现其他程序和这个程序可以共享这个活动的实例。</p><p>前面3种启动模式肯定是做不到的，因为每个应用程序都会有自己的返回栈，同一个活动在不同的返回栈中入栈时必然是创建了新的实例。</p><p>而使用singleInstance模式就可以解决这个问题，<span class="redSel">在这种模式下会有一个单独的返回栈来管理这个活动</span>，不管是哪个应用程序来访问这个活动，都共用的同一个返回栈，也就解决了共享活动实例的问题。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://konggeyuan.github.io/2022/02/23/Build-tools-32%E7%9A%84%E9%97%AE%E9%A2%98/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Space Yuan"><meta itemprop="description" content=""><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/4988185??v=3&s=460"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="没事多喝水"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a href="/2022/02/23/Build-tools-32%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">Build tools 32的问题</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-02-23 15:53:00 / 修改时间：15:55:29" itemprop="dateCreated datePublished" datetime="2022-02-23T15:53:00+08:00">2022-02-23</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%AC%94%E8%AE%B0-%E5%AE%89%E5%8D%93/" itemprop="url" rel="index"><span itemprop="name">笔记/安卓/</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>android studio 总是用最新的编译工具，而32版本的Build Tools中会出现问题。</p><p>默认编译情况会遇到Build tools 32 版本的问题。</p><p><img src="/images/pasted-99.png" alt="upload successful"></p><p>问题在于32版本开始d8文件，改为了dx。解决方法就是重命名。</p><p>Windows版本的解决方法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">进入C:\Users\你的用户名\AppData\Local\Android\Sdk\build-tools\32.0.0 目录</span><br><span class="line">找到d8.bat的文件</span><br><span class="line">复制---命名d8.bat为dx.bat。</span><br><span class="line">进入C:\Users\你的用户名\AppData\Local\Android\Sdk\build-tools\32.0.0\lib目录</span><br><span class="line">复制d8.jar，重名命名为dx.jar</span><br></pre></td></tr></table></figure><p>Mac版的解决方法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;sdk安装目录&#x2F;Android&#x2F;sdk&#x2F;build-tools&#x2F;32.0.0&#x2F;</span><br><span class="line">cp d8 dx</span><br><span class="line">cd lib&#x2F;</span><br><span class="line">cp d8.jar dx.jar</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://konggeyuan.github.io/2022/02/22/android-Google-Index-%E9%97%AE%E9%A2%98/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Space Yuan"><meta itemprop="description" content=""><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/4988185??v=3&s=460"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="没事多喝水"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a href="/2022/02/22/android-Google-Index-%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">android Google Index 问题</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-02-22 10:43:00" itemprop="dateCreated datePublished" datetime="2022-02-22T10:43:00+08:00">2022-02-22</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-02-28 18:12:55" itemprop="dateModified" datetime="2022-02-28T18:12:55+08:00">2022-02-28</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%AC%94%E8%AE%B0-%E5%AE%89%E5%8D%93/" itemprop="url" rel="index"><span itemprop="name">笔记/安卓/</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="app内build-gradle"><a href="#app内build-gradle" class="headerlink" title="app内build.gradle"></a>app内build.gradle</h1><p>lintOptions {<br>disable ‘GoogleAppIndexingWarning’<br>}</p><h1 id="项目build-gradle"><a href="#项目build-gradle" class="headerlink" title="项目build.gradle"></a>项目build.gradle</h1><p>maven{ url ‘<a href="https://maven.aliyun.com/repository/public&#39;}" target="_blank" rel="noopener">https://maven.aliyun.com/repository/public&#39;}</a><br>maven { url ‘<a href="https://maven.aliyun.com/repository/jcenter&#39;" target="_blank" rel="noopener">https://maven.aliyun.com/repository/jcenter&#39;</a> }<br>maven { url ‘<a href="https://maven.aliyun.com/repository/google&#39;}" target="_blank" rel="noopener">https://maven.aliyun.com/repository/google&#39;}</a><br>maven { url ‘<a href="https://maven.aliyun.com/repository/gradle-plugin&#39;}" target="_blank" rel="noopener">https://maven.aliyun.com/repository/gradle-plugin&#39;}</a></p><h1 id="设置代理"><a href="#设置代理" class="headerlink" title="设置代理"></a>设置代理</h1><p><a href="http://mirrors.neusoft.edu.cn" target="_blank" rel="noopener">http://mirrors.neusoft.edu.cn</a> 端口：80</p><p><a href="http://sdk.gdgshanghai.com" target="_blank" rel="noopener">http://sdk.gdgshanghai.com</a> 端口：8000</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article></section><nav class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot; aria-label&#x3D;&quot;下一页&quot;&gt;&lt;&#x2F;i&gt;</a></nav></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><div class="site-overview-wrap sidebar-panel sidebar-panel-active"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="https://avatars1.githubusercontent.com/u/4988185??v=3&s=460" alt="Space Yuan"><p class="site-author-name" itemprop="name">Space Yuan</p><div class="site-description motion-element" itemprop="description"></div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives"><span class="site-state-item-count">116</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">20</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/%20%7C%7C%20tags"><span class="site-state-item-count">62</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/konggeyuan" title="GitHub &rarr; https://github.com/konggeyuan" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:konggeyuan@gmail.com" title="E-Mail &rarr; mailto:konggeyuan@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a></span></div></div></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2022</span> <span class="with-love" id="animate"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Space Yuan</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="//libs.baidu.com//jquery/2.1.3/jquery.min.js"></script><script src="//cdn.bootcss.com/velocity/1.2.1/velocity.min.js"></script><script src="//cdn.bootcss.com/velocity/1.2.1/velocity.ui.min.js"></script><script src="/js/utils.js?v=7.1.1"></script><script src="/js/motion.js?v=7.1.1"></script><script src="/js/affix.js?v=7.1.1"></script><script src="/js/schemes/pisces.js?v=7.1.1"></script><script src="/js/next-boot.js?v=7.1.1"></script><script>function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var e=$("#local-search-input");e.attr("autocapitalize","none"),e.attr("autocorrect","off"),e.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(e){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(e,t,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:e,dataType:isXml?"xml":"json",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():e,r=document.getElementById(t),s=document.getElementById(o),a=function(){var e=r.value.trim().toLowerCase(),t=e.split(/[\s\-]+/);t.length>1&&t.push(e);var o=[];if(e.length>0&&n.forEach(function(n){function r(t,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===e&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(e,t){var o="",n=t.start;return t.hits.forEach(function(t){o+=e.substring(n,t.position);var r=t.position+t.length;o+='<b class="search-keyword">'+e.substring(t.position,r)+"</b>",n=r}),o+=e.substring(n,t.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url).replace(/\/{2,}/g,"/"),d=[],g=[];if(""!=l&&(t.forEach(function(e){function t(e,t,o){var n=e.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(t=t.toLowerCase(),e=e.toLowerCase());(s=t.indexOf(e,r))>-1;)a.push({position:s,word:e}),r=s+n;return a}d=d.concat(t(e,h,!1)),g=g.concat(t(e,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(e){e.sort(function(e,t){return t.position!==e.position?t.position-e.position:e.word.length-t.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;0>w&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(e,t){return e.searchTextCount!==t.searchTextCount?t.searchTextCount-e.searchTextCount:e.hits.length!==t.hits.length?t.hits.length-e.hits.length:e.start-t.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(e){b+="<a href='"+f+'\'><p class="search-result">'+s(p,e)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===t.length&&""===t[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x"></i></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>';else{o.sort(function(e,t){return e.searchTextCount!==t.searchTextCount?t.searchTextCount-e.searchTextCount:e.hitCount!==t.hitCount?t.hitCount-e.hitCount:t.id-e.id});var a='<ul class="search-result-list">';o.forEach(function(e){a+=e.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(e){e.stopPropagation()}),$(document).on("keyup",function(e){var t=27===e.which&&$(".search-popup").is(":visible");t&&onPopupClose()})</script><script>$(".highlight").not(".gist .highlight").each(function(t,e){var n=$("<div>").addClass("highlight-wrap");$(e).after(n),n.append($("<button>").addClass("copy-btn").append("复制").on("click",function(t){var e=$(this).parent().find(".code").find(".line").map(function(t,e){return $(e).text()}).toArray().join("\n"),n=document.createElement("textarea"),o=window.pageYOffset||document.documentElement.scrollTop;n.style.top=o+"px",n.style.position="absolute",n.style.opacity="0",n.readOnly=!0,n.value=e,document.body.appendChild(n),n.select(),n.setSelectionRange(0,e.length),n.readOnly=!1;document.execCommand("copy");n.blur(),$(this).blur()})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("复制")},300)}).append(e)})</script></body></html><!-- rebuild by neat -->